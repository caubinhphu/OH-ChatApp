extend ./layout

block contentMain
  #main.ps-rv.setting-page
    .container-fluid.mt-4
      .row
        .col-md-3.mb-3.pb-3.mb-md-0.pb-md-0.st-col-tab
          h3.text-center.text-dark
            strong Cài đặt
          #v-pills-tab.nav.flex-column.nav-pills(role='tablist', aria-orientation='vertical')
            a#v-pills-general-tab.nav-link(class=`${tab[0] ? tab[0] === 'general' ? 'active' : '' : 'active'}`, data-toggle='pill', href='#v-pills-general', role='tab', aria-controls='v-pills-general')
              span.icomoon.icon-cog
              span  Chung
            a#v-pills-security-tab.nav-link(class=`${tab[0] === 'security' ? 'active' : ''}`, data-toggle='pill', href='#v-pills-security', role='tab', aria-controls='v-pills-security')
              span.icomoon.icon-security
              span  Bảo mật
        .col-md-9.st-col-content
          #v-pills-tab-content.tab-content
            #v-pills-general.tab-pane.fade(class=`${tab[0] ? tab[0] === 'general' ? 'show active' : '' : 'show active'}`, role='tabpanel', aria-labelledby='v-pills-general-tab')
              div
                h4.text-dark Ngôn ngữ trợ lý
                form.d-flex.align-items-center.mb-5(action="/messenger/setting/lang-ass", method="post", name="formSettingLangAss")
                  input(type="hidden", name="_method" value="PUT")
                  select#lang-ass.form-control.form-control-sm.mr-3(name="language")
                    option(value="vi", selected=(member.setting.languageAssistant === 'vi')) Tiếng Việt
                    option(value="en", selected=(member.setting.languageAssistant === 'en')) Tiếng Anh
                  button.btn(type="submit") Lưu
                h4.text-dark Chat bằng microphone
                form.d-flex.align-items-center(action="/messenger/setting/chat-mic", method="post", name="formSettingChatMic")
                  input(type="hidden", name="_method" value="PUT")
                  .mr-3
                    .form-check.form-check-inline
                      .custom-control.custom-radio.my-1.ml-3
                        input#med-rec.custom-control-input(type="radio", name="method", value="1", checked=member.setting.chatMicVoice)
                        label.custom-control-label(for="med-rec") Ghi âm
                      .custom-control.custom-radio.my-1.ml-3
                        input#med-text.custom-control-input(type="radio", name="method", value="0", checked=!member.setting.chatMicVoice)
                        label.custom-control-label(for="med-text") Hiện chữ
                    #method-send-setting(class=`${member.setting.chatMicVoice ? 'd-none' : ''}`)
                      h5.text-dark Phương thức gửi tin nhắn bằng microphone
                      select.form-control.form-control-sm.mr-3(name="methodSend")
                        option(value="confirm-popup", selected=(member.setting.methodSend === 'confirm-popup')) Xác nhận bằng cửa sổ bật lên
                        option(value="confirm-voice", selected=(member.setting.methodSend === 'confirm-voice')) Xác nhận bằng lời nói
                        option(value="auto-send", selected=(member.setting.methodSend === 'auto-send')) Tự động gửi
                  button.btn(type="submit") Lưu
            #v-pills-security.tab-pane.fade(class=`${tab[0] === 'security' ? 'show active' : ''}`, role='tabpanel', aria-labelledby='v-pills-security-tab')
              h4.text-dark Bảo mật và đăng nhập
              table.table
                tbody
                  tr
                    td Email
                    td= member.email
                    td
                  tr
                    td Mật khẩu
                    td
                      if (member.type === 'local')
                        strong ..........
                      else
                        strong= `Tài khoản đăng nhập bằng ${member.type}`
                    td.text-right
                      if (member.type === 'local')
                        button.btn(data-toggle="collapse" href="#collapse-password" aria-expanded="false" aria-controls="collapse-password")
                          span.icomoon.icon-icon-edit.d-md-none
                          span.d-none.d-md-block Chỉnh sửa
                  if (member.type === 'local')
                    tr#collapse-password.collapse(class=`${subTab[0] === 'password' ? 'show' : ''}`, )
                      td.border-0(colspan="3")
                        form(action="/messenger/setting/password", method="post", name="formSettingPassword")
                          input(type="hidden", name="_method" value="PUT")
                          .form-group.d-flex
                            label.text-secondary(for="password0", style="width: 140px") Mật khẩu cũ
                            input#password0.form-control.form-control-sm(type="password", name="password0", required)
                          .form-group.d-flex
                            label.text-secondary(for="password", style="width: 140px") Mật khẩu mới
                            input#password.form-control.form-control-sm(type="password", name="password", required)
                          .form-group.d-flex
                            label.text-secondary(for="password2", style="width: 140px") Xác nhật MK
                            input#password2.form-control.form-control-sm(type="password", name="password2", required)
                          .d-flex.align-items-center.justify-content-between
                            button.btn(type="submit") Lưu thay đổi
                            a.btn.btn-link(href="#") Quên mật khẩu
                  tr
                    td URL
                    td.text-url= `${key.host}/messenger/member/${member.url || member.id }`
                    td.text-right
                      button.btn(data-toggle="collapse" href="#collapse-url" aria-expanded="false" aria-controls="collapse-url")
                        span.icomoon.icon-icon-edit.d-md-none
                        span.d-none.d-md-block Chỉnh sửa
                  tr#collapse-url.collapse(class=`${subTab[0] === 'url' ? 'show' : ''}`, )
                    td.border-0(colspan="3")
                      .text-center !{`/member/<strong class="url-preview">${member.url || member.id }</strong>`}
                      form(action="/messenger/setting/url", method="post", name="formSettingUrl")
                        input(type="hidden", name="_method" value="PUT")
                        .form-group.d-flex
                          label.text-secondary(for="url", style="width: 140px") Url
                          input#url.form-control.form-control-sm(type="text", name="url", required, value=`${member.url || member.id}`)
                        div
                          button.btn(type="submit") Lưu thay đổi



append scripts
  script(src="/js/msg-pagesub.js")
