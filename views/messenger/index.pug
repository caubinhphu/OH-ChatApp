extend ./layout

block contentMain
  #main-messenger.d-flex
    #main-left.p-3.d-flex.flex-column
      #main-left-top.d-flex.justify-content-between.align-items-center
        h4.mb-0 Chat
        #room.d-flex.align-items-center.justify-content-center
          span.text-secondary.mr-3 Phòng chat 
          a.btn.btn-icon.btn-green(href="/create", role="button", title="Tạo phòng")
            span.icomoon.icon-plus
          a.btn.btn-icon.btn-purple.ml-2(href="/join", role="button", title="Tham gia vào phòng")
            span.icomoon.icon-sign-in
      #main-left-search.mt-2
        input.form-control(type="text", placeholder="Tìm bạn bè để chat")
      #main-left-friends.mt-2.flex-fill
        each friend in friends
          .friend-item.mt-1.ps-rv(class=`${friendChat ? friend.id === friendChat.id ? "is-active": "" : ""}`)
            .friend-item-main.d-flex
              .friend-item-img
                img.rounded-circle(src=friend.avatar, alt=friend.name, width="45px")
              .friend-item-info.ml-2
                strong= friend.name
                br
                small Message
                small.ml-2 T2
            a.ps-as(href=`/messenger/chat/${friend.id}`, title=`${friend.name}`)
              span.sr-only= `Chat with ${friend.name}`

    if (friendChat)
      #main-right.flex-fill.d-flex.flex-column
        #main-right-top.d-flex.justify-content-between.p-2.align-items-center
          #main-right-top-left.d-flex
            .friend-img
              img.rounded-circle(src=friendChat.avatar, alt=friendChat.name, width="45px")
            .friend-info.ml-2
              strong= friendChat.name
              br
              small Status
          #main-right-top-right
            button(type="button").mr-2
              i.fas.fa-phone
            button(type="button")
              i.fas.fa-video
        #main-right-chat-content.flex-fill.p-2
        #main-right-top-chat-input.mb-1.px-2.wrap-chat-input
          form.d-flex(name="sendMsgForm")
            button.btn.btn-default.open-emojis(type="button") &#128512;
            .flex-fill.wrap-msg-box.ps-rv
              //- input.form-control(type="text", name="message", placeholder="Nhập tin nhắn", autocomplete="off")
              textarea#msg.form-control(name="message", placeholder="Nhập tin nhắn", autocomplete="off")
            button.btn.btn-default.text-secondary
              span.icomoon.icon-send
  div
    each member in m
      a.btn.btn-success(href=`/messenger/addfriend/${member.id}`)= member.name

append scripts
  script(src="/socket.io/socket.io.js")
  script(src="/js/home-messenger.js")
//-   script(src="/scripts/moment.min.js")
//-   script(src="/scripts/emoji.js")
//-   script(src="/scripts/common-chat.js")
  